{% extends 'wybory/base.html' %}

{% load static %}

{% block title %}Lista Kandydat贸w{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/candidate-list.css' %}">
<div class="candidate-page">
    <h2>Wyszukaj kandydat贸w</h2>

    <form method="get" action="{% url 'candidate_search' %}" class="candidate-form">
        <label for="election">Wybierz wybory:</label>
        <select name="election_id" id="election" onchange="this.form.submit()">
            <option value="">-- Wybierz wybory --</option>
            {% for election in elections %}
                <option value="{{ election.id }}" {% if election.id|stringformat:"s" == selected_election_id %}selected{% endif %}>
                    {{ election.title }}
                </option>
            {% endfor %}
        </select>
    </form>

    {% if candidates %}
        <h3>Kandydaci w wybranych wyborach:</h3>
        <ul class="candidate-list">
            {% for candidate in candidates %}
                <li>
                    <span class="candidate-name">{{ candidate.name }}</span>
                    <p class="candidate-party">
                        {% if candidate.party %}
                            Partia: {{ candidate.party.name }}
                        {% else %}
                            Bezpartyjny
                        {% endif %}
                    </p>
                </li>
            {% endfor %}
        </ul>
    {% elif selected_election_id %}
        <p>Brak kandydat贸w dla wybranych wybor贸w.</p>
    {% endif %}
</div>
{% endblock %}